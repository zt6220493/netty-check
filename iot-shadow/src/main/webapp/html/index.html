<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>终端连接日志</title>
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="static/css/bootstrap.min.css">
		<link rel="stylesheet" href="static/css/font-awesome.min.css">

		<link rel="stylesheet" href="static/css/ace-fonts.css">
		<link rel="stylesheet" href="static/css/ace.min.css">
		<link rel="stylesheet" href="static/css/ace-skins.min.css">
		<link rel="stylesheet" href="static/css/ace-rtl.min.css">
		<link rel="stylesheet" href="static/css/ace.onpage-help.css">
		<link rel="stylesheet" href="static/css/ui.jqgrid.css">
      <link rel="stylesheet" href="static/layui/css/layui.css" media="all">
</head>

<script src="static/js/ace-extra.min.js"></script>
<script src="static/js/jquery.min.js"></script>
<script src="static/js/jquery.tmpl.min.js"></script>
<script src="static/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->
<script src="static/js/jquery.dataTables.min.js"></script>
<script src="static/js/jquery.dataTables.bootstrap.js"></script>
<script src="static/js/jquery.form.js"></script>

<script type="text/javascript" src="static/js/highcharts.js"></script>
<script type="text/javascript" src="static/js/common.js"></script>
<script type="text/javascript" src="static/js/loginCommon.js"></script><style></style>
<link rel="stylesheet" href="static/css/common.css">
<script src="static/js/tablesort.js"></script>
<script src="static/js/resizable-tables.js"></script>
<script src="static/layui/layui.js" charset="utf-8"></script>
<script src="static/js/ace-elements.min.js"></script>
<script src="static/js/bootbox.min.js"></script>
<script src="static/js/respond.min.js"></script>
<script src="js/index.js"></script>
<body>
<!-- <button id="toggleButton">Toggle</button> -->
<div class="page-content" style="max-width: 98%">
	<div class="row">
		<form action="" id="queryForm" method="post" class="form-horizontal">
				<div class="layui-inline" style="width: 100px;">
					<input style="width: 80%;" id="searchContent" name="tid" type="text" placeholder="tid" value="">
					&nbsp;
				</div>
                 <div class="layui-inline" style="width: 150px;">
                    <div class="layui-input-inline">
                      <input type="text" class="layui-input" style="height: 29px;" id="test1"  name="cdate"  placeholder="选择日期" lay-key="1" value="" autocomplete="off">
                    </div>
                  </div>
                  <div class="layui-inline" style="width: 150px;">
                    <div class="layui-input-inline">
                      <input type="text" class="layui-input" style="height: 29px;" id="test4"  name="ctime" placeholder="开始时间" lay-key="2" value="" autocomplete="off">
                    </div>
                  </div>

                  <div class="layui-inline" style="width: 150px;">
                   <div class="layui-input-inline">
                      <input type="text" class="layui-input" style="height: 29px;" id="test4-2" name="endtime" placeholder="结束时间" lay-key="3" value="" autocomplete="off">
                    </div>
                  </div>
					<div class="layui-inline">
						<div class="input-group" style="width: 100px;">
							<span class="input-group-btn">
                                <input  type="submit" class="btn btn-purple btn-sm"  value="查询" />
                            </span>
						</div>
					</div>
			</form>
			</div>
<div class="row" id="pagedivid">
<div class="col-xs-12" style="overflow-x: auto;margin-top: 15px;width: 100%;">
<ul class="timeline" id="timeline" style="width: 100%;"></ul>
</div>
</div>
</div>
<script src="js/DateUtil.js"></script>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript">



$(function(){
	var curPath=window.document.location.href;  
	var pathName=window.document.location.pathname;  
	var pos=curPath.indexOf(pathName);  
	var localhostPaht=curPath.substring(0,pos);  
	var projectName=pathName.substring(0,pathName.substr(1).indexOf('/')+1);
	$.ajax({
		type : "post",
		async : false,
		dataType : "json",
		url : localhostPaht+projectName+"/device/getConnectionStatus",
		data : {
		   'terminalId' : "1864573",
		   'startTime' : 1553734333000, //2019-03-28 08:52:13
		   'endTime' : 1553745294000 //2019-03-28 09:54:54
		},
		success : function(data) {
			if(data.success=="false"){
				alert("错误了");
				return;
			}
			var resultJson = data.data;
			if(typeof(resultJson)!='undefined' && null !=resultJson){
		       for(var i=0;i<resultJson.length;i++){
		    	   var obj = "";
		    		if(resultJson[i].type=="1" || resultJson[i].type=="3"){
		    			obj += "<li class='li complete'>";
		    		}else if(resultJson[i].type=="4"){
		    			obj += "<li class='li simcheck'>";
		    		}else{
		    			obj += "<li class='li'>";
		    		}
		    		obj += "<div class='timestamp'><span class='author'>gps:";
		    		if(null==resultJson[i].gpsCount){
		    			obj += 0;
		    		}else{
		    			obj += resultJson[i].gpsCount;
		    		}
		    		obj += "</span><span class='date'>";
		    		obj += new Date(resultJson[i].time).format('hh:mm:ss');
		    		obj += "<span></div><div class='status'><h4>";
		    		if(resultJson[i].type=="1"){
		    			obj += "上线";
		    		}else if(resultJson[i].type=="2"){
		    			obj += "下线";
		    		}else if(resultJson[i].type=="3"){
		    			obj += "在线";
		    		}else if(resultJson[i].type=="4"){
		    			obj += "自检";
		    		}else{
		    			obj += "未知";
		    		}
		    		obj += "</h4></div></li>";
		    		$("#timeline").append(obj);
		       }
			}
		},
		error : function (){
			alert("错误了");
		},
		beforeSend:function(){
			
		}
	});
});

</script>

</body>
</html>
